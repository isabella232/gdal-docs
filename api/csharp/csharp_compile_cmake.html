<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compiling the C# bindings - CMake Scripts &mdash; GDAL  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/gdal.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/api/csharp/csharp_compile_cmake.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="C# Raster Interface" href="csharp_raster.html" />
    <link rel="prev" title="Compiling the C# bindings - Legacy Scripts" href="csharp_compile_legacy.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="../../index.html">
            <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/raster/index.html">Raster drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/vector/index.html">Vector drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#id2">Full Doxygen output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#c-api">C API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id3">C++ API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#python-api">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id4">Java API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#gdal-ogr-in-other-languages">GDAL/OGR In Other Languages</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">C# bindings</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#supported-platforms">Supported platforms</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#getting-gdal-for-c">Getting GDAL for C#</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#related-documents">Related Documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#useful-links">Useful Links</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#windows-build-sdks">Windows Build SDKs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../java/index.html">Java bindings</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/lukeroth/gdal">Go</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/JuliaGeo/GDAL.jl">Julia</a></li>
<li class="toctree-l3"><a class="reference external" href="https://trac.osgeo.org/gdal/wiki/GdalOgrInLua">Lua</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/naturalatlas/node-gdal">Original Node.js bindings</a></li>
<li class="toctree-l3"><a class="reference external" href="https://www.npmjs.com/package/gdal-async">Node.js fork with full Promise-based async and TypeScript support</a></li>
<li class="toctree-l3"><a class="reference external" href="https://metacpan.org/release/Geo-GDAL-FFI">Perl</a></li>
<li class="toctree-l3"><a class="reference external" href="http://dl.maptools.org/dl/php_ogr/php_ogr_documentation.html">PHP</a></li>
<li class="toctree-l3"><a class="reference external" href="http://cran.r-project.org/web/packages/rgdal/index.html">R</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/Toblerity/Fiona">Fiona</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/mapbox/rasterio">Rasterio</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/airbusgeo/godal">Godal</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sponsors/index.html">Sponsors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  documentation </a> &raquo;</li>
      
          <li><a href="../index.html">API</a> &raquo;</li>
      
          <li><a href="index.html">C# bindings</a> &raquo;</li>
      
      <li>Compiling the C# bindings - CMake Scripts</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/api/csharp/csharp_compile_cmake.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="csharp_raster.html" class="btn btn-neutral float-right" title="C# Raster Interface" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="csharp_compile_legacy.html" class="btn btn-neutral float-left" title="Compiling the C# bindings - Legacy Scripts" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="compiling-the-c-bindings-cmake-scripts">
<span id="csharp-compile-cmake"></span><h1>Compiling the C# bindings - CMake Scripts<a class="headerlink" href="#compiling-the-c-bindings-cmake-scripts" title="Permalink to this headline"></a></h1>
<p>This page describes the primary steps when creating the GDAL/OGR C# binaries from the source using the new CMake scripts.</p>
<p>In most cases this is not necessary and it is better to use one of the pre-compiled sources, such as <a class="reference external" href="https://gisinternals.com/">GisInternals</a> or Conda.</p>
<p>You can either build the bindings as part of a full GDAL build - or standalone on top of an existing installation.</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"></a></h2>
<p>The build environment has the following dependencies:</p>
<ul class="simple">
<li><p>CMake 3.10 or later</p></li>
<li><p>the appropriate C++ build environment (i.e. gcc or Visual Studio etc).</p></li>
<li><p>SWIG 4</p></li>
<li><p>.NET 5.0 or Mono</p></li>
</ul>
</section>
<section id="net-build-toolchain">
<h2>.NET Build Toolchain<a class="headerlink" href="#net-build-toolchain" title="Permalink to this headline"></a></h2>
<p>The build scripts can use either .NET 5.0 and  <code class="file docutils literal notranslate"><span class="pre">dotnet.exe</span></code> or Mono and <code class="file docutils literal notranslate"><span class="pre">msc.exe</span></code> to compile the bindings.</p>
<p>.NET is used for preference if it found on all platforms but the use of Mono can be forced using a command line variable.</p>
</section>
<section id="building-as-part-of-a-gdal-build">
<h2>Building as part of a GDAL Build<a class="headerlink" href="#building-as-part-of-a-gdal-build" title="Permalink to this headline"></a></h2>
<p>The build environment uses the following variables:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 14%" />
<col style="width: 55%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>CSHARP_MONO</p></td>
<td><p>Boolean</p></td>
<td><p>Forces the use of Mono</p></td>
</tr>
<tr class="row-even"><td><p>CSHARP_LIBRARY_VERSION</p></td>
<td><p>String</p></td>
<td><p>Set the .NET version for the shared libraries</p></td>
</tr>
<tr class="row-odd"><td><p>CSHARP_APPLICATION_VERSION</p></td>
<td><p>String</p></td>
<td><p>Set the .NET version for the sample apps</p></td>
</tr>
<tr class="row-even"><td><p>GDAL_CSHARP_ONLY</p></td>
<td><p>Boolean</p></td>
<td><p>Build standalone on GDAL binaries</p></td>
</tr>
<tr class="row-odd"><td><p>BUILD_CSHARP_BINDINGS</p></td>
<td><p>Boolean</p></td>
<td><p>Build the C# bindings DEFAULT ON</p></td>
</tr>
</tbody>
</table>
<section id="building-with-net">
<h3>Building with .NET<a class="headerlink" href="#building-with-net" title="Permalink to this headline"></a></h3>
<p>If the build environment has .NET 5.0 installed and GDAL is built, then the c# bindings will be built using .NET by default.</p>
<p>The details of building GDAL are documented elsewhere, but there are likely to be variants of the following commands run from the root directory of the gdal repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span> <span class="o">../</span><span class="n">install</span> <span class="o">-</span><span class="n">B</span> <span class="o">../</span><span class="n">build</span> <span class="o">-</span><span class="n">S</span> <span class="o">.</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">../</span><span class="n">build</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">../</span><span class="n">build</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span> <span class="o">--</span><span class="n">target</span> <span class="n">install</span>
</pre></div>
</div>
<p>The C# bindings and sample apps are installed in the install directory (in the above case that would be <cite>../install</cite>, in the <cite>share/csharp</cite> sub folder. There would be the following files:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">gdal_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">ogr_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdalconst_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdal_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdal_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdal_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">ogr_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libogr_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libogr_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdalconst_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdalconst_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdalconst_wrap.dylib</span></code></p></li>
<li><p>various sample applications - as *.exe on Windows, or just as * on Unix, along with *.dll for each app and the runtime config files.</p></li>
</ul>
<p>There are also subdirectories for each of the sample apps, holding the config files.</p>
<p>There are also the following NuGET packages:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">OSGeo.GDAL</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">OSGeo.OGR</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">OSgeo.OSR</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">OSGeo.GDAL.CONST</span></code></p></li>
<li><p>various sample application</p></li>
</ul>
</section>
<section id="using-the-net-bindings">
<h3>Using the .NET Bindings<a class="headerlink" href="#using-the-net-bindings" title="Permalink to this headline"></a></h3>
<p>The easiest way to use the bindings in development would be use the NuGET packages created.</p>
<p>To do this you need to add a local repistory pointing to the GDAL install directory. <a class="reference external" href="https://docs.microsoft.com/en-us/nuget/hosting-packages/local-feeds">This is explained here</a> .</p>
<p>Once this is done, you add the GDAL packages into your project as normal.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These packages only install the bindings and do not install core GDAL. It is for you as the developer to make sure that the GDAL binaries are available in the search path.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The NuGET packages are created with the same version number as the version of GDAL in the build system.
If you are building in a GIT repository, then the build system automatically makes the version with a x.y.z-dev pre-release tag.
This means that to load the package into Visual Studio (for instance), you have to tick the pre-release box.
This is all intentional and not a bug.</p>
</div>
</section>
<section id="building-on-mono">
<h3>Building on Mono<a class="headerlink" href="#building-on-mono" title="Permalink to this headline"></a></h3>
<p>If the build environment does not have .NET 5.0 or msbuild installed and GDAL is built, then the c# bindings will be built using Mono by default. Mono building can also be forced
by setting CSHARP_MONO.</p>
<p>The details of building GDAL are documented elsewhere, but the there are likely to be variants of the following commands run from the root directory of the gdal repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span> <span class="o">../</span><span class="n">install</span> <span class="o">-</span><span class="n">DCSHARP_MONO</span><span class="o">=</span><span class="n">ON</span> <span class="o">-</span><span class="n">B</span> <span class="o">../</span><span class="n">build</span> <span class="o">-</span><span class="n">S</span> <span class="o">.</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">../</span><span class="n">build</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">../</span><span class="n">build</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span> <span class="o">--</span><span class="n">target</span> <span class="n">install</span>
</pre></div>
</div>
<p>The C# bindings and sample apps are installed in the install directory (in the above case that would be <cite>../install</cite>, in the <cite>share/csharp</cite> sub folder. There would be the following files:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">gdal_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">ogr_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdalconst_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdal_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdal_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdal_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">ogr_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libogr_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libogr_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libosr_wrap.dylib</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdalconst_wrap.dll</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdalconst_wrap.so</span></code> or <code class="file docutils literal notranslate"><span class="pre">libgdalconst_wrap.dylib</span></code></p></li>
<li><p>various sample applications as *.exe on all platforms.</p></li>
</ul>
</section>
<section id="using-the-mono-bindings">
<h3>Using the Mono Bindings<a class="headerlink" href="#using-the-mono-bindings" title="Permalink to this headline"></a></h3>
<p>Note that the bindings created by this process will only work with Mono.</p>
<p>To run one of the prebuilt executables - you can run them with Mono as follows :</p>
<p><strong class="program">mono GDALInfo.exe</strong></p>
<p>Both the managed libraries (i.e. the DLLs) and the unmanaged libraries must be available to Mono.
This is in more detail in <a class="reference external" href="https://www.mono-project.com/docs/advanced/pinvoke/">the Mono documentation</a></p>
</section>
</section>
<section id="building-standalone">
<h2>Building Standalone<a class="headerlink" href="#building-standalone" title="Permalink to this headline"></a></h2>
<p>The Bindings using both the .NET or Mono toolchains can be build on top of an existing implementation of GDAL
that includes the include files and libs - for instance the Conda distribution.</p>
<p>To do this, Cmake must be run with the GDAL_CSHARP_ONLY flag set and only one of the following targets should be built:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>csharp_binding</p></td>
<td><p>Just the bindings</p></td>
</tr>
<tr class="row-even"><td><p>csharp_samples</p></td>
<td><p>The bindings and the sample apps</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not build the install target when running standalone, it will fail!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not run a bare ctest command on this build, it will likely fail! Use something like <cite>ctest -R “^csharp.*”</cite> instead.</p>
</div>
<p>As an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DGDAL_CSHARP_ONLY</span><span class="o">=</span><span class="n">ON</span> <span class="o">-</span><span class="n">B</span> <span class="o">../</span><span class="n">build</span> <span class="o">-</span><span class="n">S</span> <span class="o">.</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">../</span><span class="n">build</span> <span class="o">--</span><span class="n">config</span> <span class="n">Release</span> <span class="o">--</span><span class="n">target</span> <span class="n">csharp_samples</span>
</pre></div>
</div>
<p>The output from this build is axactly the same as documented as above, except that the outputs will be in <cite>../build/swig/csharp</cite> and some of the sub folders.</p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="csharp_raster.html" class="btn btn-neutral float-right" title="C# Raster Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="csharp_compile_legacy.html" class="btn btn-neutral float-left" title="Compiling the C# bindings - Legacy Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2022 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>